{# =============================================================================
CHAT AREA PARTIAL
Main chat interface with messages and input
============================================================================= #}

<div class="chat-area">
    <!-- Messages -->
    <div class="messages-container" id="messages-container">
        <div class="welcome-message" id="welcome-message">
            <div class="welcome-icon">
                <i class="bi bi-chat-dots"></i>
            </div>
            <h2 id="welcome-title">Welcome to {{ app_name }}</h2>
            <p id="welcome-subtitle">Your AI assistant with access to powerful tools.</p>
            <p class="text-muted login-prompt"><span>Login to start chatting.</span><i
                    class="bi bi-arrow-right-circle"></i></p>

            <!-- Definition Tiles (shown when logged in) -->
            <div class="welcome-definitions d-none" id="welcome-definitions">
                <p class="definitions-prompt">Select an assistant to get started:</p>
                <div class="definition-tiles-container" id="definition-tiles">
                    <!-- Dynamically populated with definition tiles -->
                </div>
            </div>
        </div>
    </div>

    <!-- Input Area -->
    <div class="input-area">
        <!-- Attached Files Display -->
        <div class="attached-files d-none" id="attached-files">
            <!-- Dynamically populated with file badges -->
        </div>

        <form id="chat-form" class="chat-form">
            <div class="input-group">
                <!-- Hidden file input -->
                <input type="file" id="file-input" class="d-none"
                    accept=".txt,.md,.json,.csv,.xml,.yaml,.yml,.pdf,.docx,.doc,.xlsx,.xls,.pptx,.ppt,.png,.jpg,.jpeg,.gif,.svg,.webp,.py,.js,.ts,.html,.css,.zip">

                <!-- Upload button - hidden by default, shown when backend sends enabled:true -->
                <button type="button" class="btn btn-outline-secondary upload-btn d-none" id="upload-btn"
                    title="Attach a file (10MB max)" disabled>
                    <i class="bi bi-paperclip"></i>
                </button>

                <textarea id="message-input" class="form-control" placeholder="" rows="1" disabled></textarea>
                <!-- Send button - hidden by default (chat-input-hidden marker), shown when backend sends enabled:true -->
                <button type="submit" class="btn btn-primary send-btn d-none chat-input-hidden" id="send-btn" disabled>
                    <i class="bi bi-send"></i>
                </button>
                <button type="button" class="btn btn-danger cancel-btn d-none" id="cancel-btn" title="Cancel response">
                    <i class="bi bi-stop-fill"></i>
                </button>
                <!-- End Session button - shown during proactive sessions -->
                <button type="button" class="btn btn-danger end-session-btn-input d-none" id="end-session-btn-input"
                    title="End session">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
        </form>
        <div class="input-info">
            <span class="status-indicator" id="status-indicator">
                <!-- Session Active badge - shown during proactive sessions -->
                <span class="session-badge-inline d-none" id="session-badge-inline">
                    <i class="bi bi-circle-fill pulse"></i>
                    <span class="session-label">Session</span>
                </span>
                <i class="bi bi-circle-fill status-dot"></i>
                <span class="status-text">Disconnected</span>
                <span class="tool-executing d-none" id="tool-executing">
                    <i class="bi bi-gear spin"></i>
                    <span class="tool-name"></span>
                </span>
            </span>
            <div class="input-info-right">
                <div class="model-selector-container d-none" id="model-selector-container">
                    <select class="form-select form-select-sm" id="model-selector" title="Select AI model">
                        <!-- Options populated dynamically -->
                    </select>
                </div>
                <button type="button" class="tools-indicator" id="tools-btn" title="View available tools">
                    <i class="bi bi-tools"></i>
                    <span class="tools-count">0</span>
                </button>
                <a href="#" class="health-link" id="health-link" title="Check service health">
                    <i class="bi bi-heart-pulse"></i>
                </a>
            </div>
        </div>
    </div>
</div>
