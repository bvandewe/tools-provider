{# =============================================================================
CHAT AREA PARTIAL
Main chat interface with messages and input
============================================================================= #}

<div class="chat-area">
    <!-- Messages -->
    <div class="messages-container" id="messages-container">
        <div class="welcome-message" id="welcome-message">
            <div class="welcome-icon">
                <i class="bi bi-chat-dots"></i>
            </div>
            <h2 id="welcome-title">Welcome to {{ app_name }}</h2>
            <p id="welcome-subtitle">Your AI assistant with access to powerful tools.</p>
            <p class="text-muted login-prompt"><span>Login to start chatting.</span><i
                    class="bi bi-arrow-right-circle"></i></p>

            <!-- Session Type Cards (shown when logged in) -->
            <div class="session-type-cards d-none" id="session-type-cards">
                <div class="session-card" id="card-chat" data-mode="chat" tabindex="0">
                    <div class="session-card-icon">
                        <i class="bi bi-chat-dots"></i>
                    </div>
                    <div class="session-card-content">
                        <h3 class="session-card-title">Chat</h3>
                        <p class="session-card-description">Regular conversation</p>
                    </div>
                    <div class="session-card-check d-none">
                        <i class="bi bi-check-lg"></i>
                    </div>
                </div>

                <div class="session-card" id="card-thought" data-mode="thought" tabindex="0">
                    <div class="session-card-icon">
                        <i class="bi bi-lightbulb"></i>
                    </div>
                    <div class="session-card-content">
                        <h3 class="session-card-title">Thought Session</h3>
                        <p class="session-card-description">AI-guided brainstorming</p>
                    </div>
                    <div class="session-card-check d-none">
                        <i class="bi bi-check-lg"></i>
                    </div>
                </div>

                <div class="session-card" id="card-learning" data-mode="learning" tabindex="0">
                    <div class="session-card-icon">
                        <i class="bi bi-mortarboard"></i>
                    </div>
                    <div class="session-card-content">
                        <h3 class="session-card-title">Learning Session</h3>
                        <p class="session-card-description">AI-guided learning</p>
                    </div>
                    <div class="session-card-check d-none">
                        <i class="bi bi-check-lg"></i>
                    </div>
                </div>

                <div class="session-card" id="card-validation" data-mode="validation" tabindex="0">
                    <div class="session-card-icon">
                        <i class="bi bi-check-circle"></i>
                    </div>
                    <div class="session-card-content">
                        <h3 class="session-card-title">Evaluation Session</h3>
                        <p class="session-card-description">Knowledge assessment</p>
                    </div>
                    <div class="session-card-check d-none">
                        <i class="bi bi-check-lg"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Input Area -->
    <div class="input-area">
        <!-- Attached Files Display -->
        <div class="attached-files d-none" id="attached-files">
            <!-- Dynamically populated with file badges -->
        </div>

        <form id="chat-form" class="chat-form">
            <div class="input-group">
                <!-- Hidden file input -->
                <input type="file" id="file-input" class="d-none"
                    accept=".txt,.md,.json,.csv,.xml,.yaml,.yml,.pdf,.docx,.doc,.xlsx,.xls,.pptx,.ppt,.png,.jpg,.jpeg,.gif,.svg,.webp,.py,.js,.ts,.html,.css,.zip">

                <!-- Upload button -->
                <button type="button" class="btn btn-outline-secondary upload-btn" id="upload-btn"
                    title="Attach a file (10MB max)" disabled>
                    <i class="bi bi-paperclip"></i>
                </button>

                <textarea id="message-input" class="form-control" placeholder="Type your message..." rows="1"
                    disabled></textarea>
                <button type="submit" class="btn btn-primary send-btn" id="send-btn" disabled>
                    <i class="bi bi-send"></i>
                </button>
                <button type="button" class="btn btn-danger cancel-btn d-none" id="cancel-btn" title="Cancel response">
                    <i class="bi bi-stop-fill"></i>
                </button>
                <!-- End Session button - shown during proactive sessions -->
                <button type="button" class="btn btn-danger end-session-btn-input d-none" id="end-session-btn-input"
                    title="End session">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
        </form>
        <div class="input-info">
            <span class="status-indicator" id="status-indicator">
                <!-- Session Active badge - shown during proactive sessions -->
                <span class="session-badge-inline d-none" id="session-badge-inline">
                    <i class="bi bi-circle-fill pulse"></i>
                    <span class="session-label">Session</span>
                </span>
                <i class="bi bi-circle-fill status-dot"></i>
                <span class="status-text">Disconnected</span>
                <span class="tool-executing d-none" id="tool-executing">
                    <i class="bi bi-gear spin"></i>
                    <span class="tool-name"></span>
                </span>
            </span>
            <div class="input-info-right">
                <div class="model-selector-container d-none" id="model-selector-container">
                    <select class="form-select form-select-sm" id="model-selector" title="Select AI model">
                        <!-- Options populated dynamically -->
                    </select>
                </div>
                <button type="button" class="tools-indicator" id="tools-btn" title="View available tools">
                    <i class="bi bi-tools"></i>
                    <span class="tools-count">0</span>
                </button>
                <a href="#" class="health-link" id="health-link" title="Check service health">
                    <i class="bi bi-heart-pulse"></i>
                </a>
            </div>
        </div>
    </div>
</div>
